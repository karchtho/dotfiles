# Shared aliases available on all platforms
# Platform-specific aliases are loaded at the end based on OS

# Navigation
alias ..='cd ..'
alias ...='cd ../..'
alias ....='cd ../../..'

# List files
alias ll='ls -lah'
alias la='ls -A'
alias l='ls -CF'

# Safety
alias rm='rm -i'
alias cp='cp -i'
alias mv='mv -i'

# Git
alias g='git'
alias gs='git status'
alias ga='git add'
alias gaa='git add --all'
alias gc='git commit -m'
alias gca='git commit --amend'
alias gp='git push'
alias gpf='git push --force-with-lease'
alias gl='git pull'
alias gf='git fetch'
alias gb='git branch'
alias gco='git checkout'
alias gcb='git checkout -b'
alias gsw='git switch'
alias gswc='git switch -c'
alias gm='git merge'
alias gr='git rebase'
alias gri='git rebase -i'
alias glog='git log --oneline --graph --decorate'
alias gd='git diff'
alias gds='git diff --staged'
alias gst='git stash'
alias gstp='git stash pop'
alias feature='f() { git fetch origin develop && git checkout -b feature/$1 origin/develop; }; f'
alias fix='f() { git fetch origin develop && git checkout -b fix/$1 origin/develop; }; f'
alias chore='f() { git fetch origin develop && git checkout -b chore/$1 origin/develop; }; f'
alias hotfix='f() { git fetch origin main && git checkout -b hotfix/$1 origin/main; }; f'
# Merge requests
alias mreview='f() { 
  if [ -z "$1" ]; then 
    echo "Usage: mreview <MR_number>"; 
    return 1; 
  fi; 
  git fetch origin refs/merge-requests/$1/head:mr-$1 && git checkout mr-$1; 
}; f'

# Pull Requests
alias prreview='f() { 
  if [ -z "$1" ]; then 
    echo "Usage: prreview <PR_number>"; 
    return 1; 
  fi; 
  git fetch origin pull/$1/head:pr-$1 && git checkout pr-$1; 
}; f'
 

# Shortcuts
alias cl='clear'
alias h='history'
alias reload='source ~/.zshrc'
alias myip='curl -s ifconfig.me'
alias df='df -h'
alias du='du -h'
alias free='free -h'

# Quick edit
alias zshrc='nano ~/.zshrc'
alias aliases='nano ~/.aliases'

# Display search in aliases
alias findalias='cat ~/.aliases | grep'

# ============================================================================
# TREE UTILITIES - Universal & Practical
# ============================================================================

# Basic tree with sane defaults
alias t='tree -L 2'                        # Quick 2-level view
alias t3='tree -L 3'                       # 3-level view
alias ta='tree -a -L 2'                    # Include hidden files

# Clean view (ignore common noise)
alias tc='tree -L 3 -I "node_modules|dist|build|.git|coverage|*.log|.cache|vendor"'

# Directory structure only (no files)
alias td='tree -d -L 3'                    # Directories only
alias tdc='tree -d -L 3 -I "node_modules|dist|build|.git|vendor"'

# Respect .gitignore
alias tg='tree -I "$(cat .gitignore 2>/dev/null | grep -v "^#" | grep -v "^$" | tr "\n" "|" | sed "s/|$//")"'

# Count files (useful for checking project size)
alias tcount='tree -I "node_modules|dist|build|.git|vendor" | tail -1'

# Save tree to file (outputs to STRUCTURE.txt)
alias tsave='tree -L 3 -I "node_modules|dist|build|.git|coverage|.cache|vendor|*.log" --dirsfirst --charset ascii -n -o STRUCTURE.txt && echo "✓ Tree saved to STRUCTURE.txt"'

# Save with config files (outputs to STRUCTURE.txt)
alias tsaveconfig='tree -L 2 -I "node_modules|dist|build|.git|coverage|vendor" --charset ascii -n -o STRUCTURE.txt && echo "✓ Tree with configs saved to STRUCTURE.txt"'

# Save to custom filename: tsaveto FILENAME.txt
tsaveto() {
    tree -L 3 -I "node_modules|dist|build|.git|coverage|.cache|vendor|*.log" --dirsfirst --charset ascii -n -o "$1" && echo "✓ Tree saved to $1"
}

# ============================================================================
# DOCKER CORE ALIASES - Single Container Management
# ============================================================================

# Container lifecycle
alias drun='docker run'
alias drunit='docker run -it --rm'         # Interactive + auto-remove
alias dstart='docker start'
alias dstop='docker stop'
alias drm='docker rm'
alias drmf='docker rm -f'                  # Force remove

# List & inspect
alias dps='docker ps'                      # Running containers
alias dpsa='docker ps -a'                  # All containers
alias dimg='docker images'                 # List images
alias dvol='docker volume ls'              # List volumes

# Execute & logs
alias dex='docker exec -it'                # Enter running container
alias dlogs='docker logs -f'               # Follow logs
alias dinspect='docker inspect'            # Inspect container/image

# Cleanup
alias dprune='docker system prune -f'      # Clean stopped containers
alias dprunea='docker system prune -af'    # Clean everything (aggressive)
alias dvprune='docker volume prune -f'     # Clean unused volumes
alias dimgrm='docker rmi'                  # Remove image

# Quick combos for experimentation
alias dtest='docker run -it --rm'          # Quick test container
alias dbash='docker run -it --rm bash'     # Quick bash session

# Database quick starts
alias dpostgres='docker run --name postgres-test -e POSTGRES_PASSWORD=test -p 5432:5432 -d postgres'
alias dmaria='docker run --name maria-test -e MYSQL_ROOT_PASSWORD=test -p 3306:3306 -d mariadb'
alias dredis='docker run --name redis-test -p 6379:6379 -d redis'

# Enter database containers
alias dpsql='docker exec -it postgres-test psql -U postgres'
alias dmysql='docker exec -it maria-test mysql -u root -ptest'

# ============================================================================
# DOCKER COMPOSE ALIASES - Project Management
# ============================================================================

# Use 'dc' prefix for compose, 'd' prefix for raw docker
alias dc='docker compose -f docker-compose.dev.yml'
alias dcp='docker compose -f docker-compose.prod.yml'

alias dcup='dc up'
alias dcupd='dc up -d'
alias dcdown='dc down'
alias dcbuild='dc build'
alias dclogs='dc logs -f'
alias dcps='dc ps'

# Keep your nuclear options - they're great
alias dcnuke='dc down -v --remove-orphans'
alias dcpurge='dc down -v --rmi all --remove-orphans'

# Project-specific exec
alias dcshf='dc exec frontend sh'
alias dcshb='dc exec backend sh'

# ============================================================================
# Platform-specific aliases
# ============================================================================

# Detect OS and source appropriate aliases
if [[ "$OSTYPE" == "darwin"* ]]; then
  # macOS-specific aliases
  [ -f ~/.aliases.macos ] && source ~/.aliases.macos
elif [[ "$OSTYPE" == "linux-gnu"* ]]; then
  # Linux-specific aliases
  [ -f ~/.aliases.linux ] && source ~/.aliases.linux
fi
